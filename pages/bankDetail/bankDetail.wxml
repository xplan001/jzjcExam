<!-- 题库详情页面 -->
<view class="container">
  <!-- 加载指示器 -->
  <view class="loading-container" wx:if="{{loading}}">
    <view class="loading-spinner"></view>
    <text class="loading-text">正在加载题库...</text>
  </view>

  <!-- 骨架屏 -->
  <view class="skeleton-container" wx:if="{{loading}}">
    <view class="skeleton-item skeleton-title"></view>
    <view class="skeleton-item skeleton-desc"></view>
    <view class="skeleton-stats">
      <view class="skeleton-item skeleton-stat"></view>
      <view class="skeleton-item skeleton-stat"></view>
      <view class="skeleton-item skeleton-stat"></view>
    </view>
    <view class="skeleton-item skeleton-question"></view>
    <view class="skeleton-item skeleton-question"></view>
    <view class="skeleton-item skeleton-question"></view>
  </view>

  <!-- 主要内容区域，仅在非加载状态显示 -->
  <block wx:if="{{!loading}}">
  <!-- 空状态提示 -->
  <view class="empty-state" wx:if="{{questions.length === 0}}">
    <view class="empty-icon"></view>
    <text class="empty-title">暂无题目</text>
    <text class="empty-desc">当前题库没有可用题目，请稍后再试</text>
    <button class="empty-button" bindtap="refreshBankData">刷新题库</button>
  </view>

  <!-- 题库介绍 -->
  <view class="bank-intro" wx:else>
    <text class="bank-title">{{bankTitle}}</text>
    <text class="bank-desc">{{bankDescription}}</text>
    <view class="bank-stats">
      <view class="stat-item">
        <text class="stat-number">{{questionCount}}</text>
        <text class="stat-label">题目总数</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{completedCount}}</text>
        <text class="stat-label">已完成</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{progress}}%</text>
        <text class="stat-label">完成进度</text>
      </view>
    </view>
  </view>

  <!-- 题目列表 -->
  <scroll-view class="question-list" scroll-y>
    <view wx:for="{{questions}}" wx:key="index" class="question-item" bindtap="goToQuestionDetail" data-index="{{index}}">
      <view class="question-number">{{index + 1}}</view>
      <view class="question-content">
        <text class="question-text">{{item.question}}</text>
        <view class="question-meta">
          <text class="question-type">{{item.type}}</text>
          <icon type="success" size="16" class="completed-icon" wx:if="{{item.completed}}"/>
          <icon type="star" size="16" class="favorite-icon" wx:if="{{item.isFavorited}}" catchtap="toggleFavorite" data-index="{{index}}"/>
          <icon type="star-o" size="16" class="favorite-icon" wx:if="{{!item.isFavorited}}" catchtap="toggleFavorite" data-index="{{index}}"/>
        </view>
      </view>
    </view>
  </scroll-view>

  <!-- 底部固定按钮 -->
  <view class="bottom-button" bindtap="startPractice">
    <text class="button-text">开始刷题</text>
  </view>
</block>
</view>